<% if @run.errors.any? %>
  <div id="error_explanation">
    <h2>
      <%= pluralize(@run.errors.count, "error") %>
      prohibited this run from being saved:
    </h2>

    <ul>
    <% @run.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
    <% end %>
    </ul>
  </div>
<% end %>

<div class="container">
  <div class="feature"L>
    <h1>New Run Page</h1>

    <%= form_for @run do |f| %>

      <%= f.hidden_field :runner_id %>
      <%= f.label :course %>
      <%= f.text_field :course %>
      <br />
      <%= f.label :distance %>
      <%= f.text_field :distance %>
      <br />
      <%= f.label "Time (in minutes)" %>
      <%= f.text_field :time %>
      <br />
      <%= f.label :review %>
      <%= f.text_area :review %>
      <br />
      <%= f.label :rating %>
      <%= f.text_field :rating %>
      <br />
      <%= f.submit %>

    <% end %>

  </div>
</div>

<div id="postResult">

  <p id="runCourse">whoa</p>
  <p id="runDistance"></p>
  <p id="runTime"></p>
  <p id="runReview"></p>
  <p id="runRating"></p>

</div>

<script type="text/javascript" charset="utf-8">

  $(function() {
    $('form').submit(function(event) {
      event.preventDefault();

      var values = $(this).serialize();

      var posting = $.post('/runs', values);

      posting.done(function(data) {
        var run = data;
        $("#runCourse").text(run["course"]);
        $("#runDistance").text(run["distance"]);
        $("#runTime").text(run["time"]);
        $("#runReview").text(run["review"]);
        $("#runRating").text(run["rating"]);
      });
    });
  });

</script>
